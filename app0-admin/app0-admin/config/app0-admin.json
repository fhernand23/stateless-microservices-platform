{
    "$schema": "https://raw.githubusercontent.com/hopeit-git/hopeit.engine/master/engine/config/schemas/app-config-schema-draftv6.json",
    "app": {
        "name": "app0-admin",
        "version": "1.0"
    },
    "plugins": [
        {
            "name": "platform-auth",
            "version": "1.0"
        }
    ],
    "engine": {
        "import_modules": [
            "app0.admin"
        ],
        "cors_origin": "*"
    },
    "app_connections": {
        "admin_conn": {
            "name": "app0-admin",
            "version": "1.0",
            "client": "hopeit.apps_client.AppsClient"
        },
        "claims_conn": {
            "name": "app0-claims",
            "version": "1.0",
            "client": "hopeit.apps_client.AppsClient"
        }
    },
    "settings": {
        "app0admin_conn": {
            "connection_str": "${APP0ADMIN_API_URL}"
        },
        "app0claims_conn": {
            "connection_str": "${APP0CLAIMS_API_URL}"
        },
        "data_store": {
            "endpoint_url": "${OBJECT_STORAGE_ENDPOINT_URL}",
            "aws_access_key_id": "${OBJECT_STORAGE_ACCESS_KEY_ID}",
            "aws_secret_access_key" : "${OBJECT_STORAGE_SECRET_ACCESS_KEY}",
            "use_ssl": false
        },
        "logo_imgs": {            
            "bucket": "img-logo",
            "chunk_size": 16384
        },
        "company_docs": {            
            "bucket": "company-docs",
            "chunk_size": 16384
        },
        "claims_docs": {
            "chunk_size": 16384,
            "bucket": "claims-docs"
        },
        "claims-testing": {
            "bucket": "claims-testing",
            "chunk_size": 16384
        }
    },
    "env": {
        "env_config": {
            "env_type": "${ENV_TYPE}",
            "app0_admin_url": "${APP0ADMIN_URL}",
            "app0_claims_url": "${APP0CLAIMS_URL}",
            "mail_app_from": "${MAIL_APP_FROM}",
            "mailto_overwrite": "${MAILTO_OVERWRITE}",
            "mail_attach_overwrite": "${MAIL_ATTACH_OVERWRITE}"
        },
        "mongodb": {
            "conn_str": "${MONGO_URL}",
            "dbname": "app0db"
        },        
        "email_templates": {
            "templates_folder": "./email/templates"
        },
        "fs": {
            "auth_store": "./auth",
            "recover_store": "./recover"
        },
        "data_store": {
            "endpoint_url": "${OBJECT_STORAGE_ENDPOINT_URL}",
            "aws_access_key_id": "${OBJECT_STORAGE_ACCESS_KEY_ID}",
            "aws_secret_access_key" : "${OBJECT_STORAGE_SECRET_ACCESS_KEY}",
            "use_ssl": false
        },
        "logo_imgs": {            
            "bucket": "img-logo",
            "chunk_size": 16384
        },
        "company_docs": {            
            "bucket": "company-docs",
            "chunk_size": 16384
        },
        "claims_docs": {
            "chunk_size": 16384,
            "bucket": "claims-docs"
        }
    },
    "events": {
        "api.enum_list": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.app_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.app_list": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.app_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.group_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.group_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.group_list": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.role_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.role_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.role_list": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.user_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ],
            "connections": [
                {
                    "app_connection": "app0admin_conn",
                    "event": "api.tmail-send",
                    "type": "POST"
                }
            ],
            "write_stream": {
                "name": "{{auto}}"
            }
        },
        "api.user_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.user_list": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.user_password": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.auth_user_apps": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.auth_user_roles": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.auth_user_notifications": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.auth_company_notifications": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.auth_user_employee": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.company_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.company_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.company_list": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.company_data": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.company_file_upload": {
            "type": "MULTIPART",
            "auth": [
                "Bearer"
            ],
            "setting_keys": [
                "company_docs",
                "data_store"
            ]
        },
        "api.notification_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.notification_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.notification_list": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.test_errors": {
            "type": "GET",
            "auth": [
                "Unsecured"
            ]
        },
        "api.setup_db": {
            "type": "GET",
            "auth": [
                "Unsecured"
            ]
        },
        "api.setup_adhoc": {
            "type": "GET",
            "auth": [
                "Unsecured"
            ],
            "setting_keys": [
                "data_store",
                "claims-testing"
            ]
        },
        "api.company_file_get": {
            "type": "GET",
            "auth": [
                "Unsecured"
            ],
            "setting_keys": [
                "company_docs",
                "data_store"
            ]
        },
        "api.logo_upload": {
            "type": "MULTIPART",
            "auth": [
                "Bearer"
            ],
            "setting_keys": [
                "logo_imgs",
                "data_store"
            ]
        },
        "api.logo_get": {
            "type": "GET",
            "auth": [
                "Unsecured"
            ],
            "setting_keys": [
                "logo_imgs",
                "data_store"
            ]
        },
        "api.event_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.event_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.event_list": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.tmail_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.tmail_test": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.tmail_send": {
            "type": "POST",
            "auth": [
                "Bearer"
            ],
            "write_stream": {
                "name": "{events.streams.api.mail_processor.write_stream.name}"
            }
        },
        "api.tmail_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.tmail_list": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.plan_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.plan_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.plan_list": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.plan_list_enabled": {
            "type": "GET",
            "auth": [
                "Unsecured"
            ]
        },
        "api.registration_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ],
            "write_stream": {
                "name": "stream_registration_save"
            }
        },
        "api.registration_pub_save": {
            "type": "POST",
            "auth": [
                "Unsecured"
            ],
            "write_stream": {
                "name": "stream_registration_save"
            }
        },
        "api.registration_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.registration_list": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.registration_process": {
            "type": "STREAM",
            "connections": [
                {
                    "app_connection": "base_conn",
                    "event": "api.tmail-send",
                    "type": "POST"
                }
            ],
            "read_stream": {
                "name": "stream_registration_save",
                "consumer_group": "{auto}"
            },
            "write_stream": {
                "name": "stream_subscription_init"
            }
        },
        "api.mail_processor": {
            "type": "STREAM",
            "read_stream": {
                "name": "{events.streams.api.mail_processor.write_stream.name}",
                "consumer_group": "{auto}"
            }
        },
        "api.subscription_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.subscription_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        },
        "api.subscription_list": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.subscription_init": {
            "type": "STREAM",
            "read_stream": {
                "name": "stream_subscription_init",
                "consumer_group": "{auto}"
            }
        },
        "api.user_employee_create": {
            "type": "STREAM",
            "connections": [
                {
                    "app_connection": "base_conn",
                    "event": "api.tmail-send",
                    "type": "POST"
                }
            ],
            "read_stream": {
                "name": "stream_employee_create",
                "consumer_group": "{auto}"
            }
        },
        "api.company_config_save": {
            "type": "POST",
            "auth": [
                "Bearer"
            ]
        },
        "api.company_config_get": {
            "type": "GET",
            "auth": [
                "Bearer"
            ]
        }
    }
}